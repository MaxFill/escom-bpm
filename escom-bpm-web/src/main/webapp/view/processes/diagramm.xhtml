<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">                

    <p:toolbar styleClass="ui-grid-col-12" >
        <f:facet name="left">
            <p:commandButton value="Tasks" title="#{bundle.AddTasks}"
                             disabled="#{processCardBean.isReadOnly()}"
                             onstart="PF('statusDialog').show()"
                             oncomplete="PF('statusDialog').hide();"
                             actionListener="#{staffBean.onManySelectItem()}" >
                <p:ajax event="dialogReturn" listener="#{processCardBean.onStaffsSelected}" />
            </p:commandButton>
            <p:commandButton  value="And" title="#{bundle.AddLogicElement}"
                              disabled="#{processCardBean.isReadOnly()}"
                              actionListener="#{processCardBean.onAddLogicElement('And')}" >
            </p:commandButton>
            <p:commandButton  value="Or" title="#{bundle.AddLogicElement}"
                              disabled="#{processCardBean.isReadOnly()}"
                              actionListener="#{processCardBean.onAddLogicElement('Or')}" >
            </p:commandButton>
            <p:commandButton  value="If" title="#{bundle.AddCondition}"
                              disabled="#{processCardBean.isReadOnly()}"
                              actionListener="#{processCardBean.onAddConditionElement()}" >
                <p:ajax event="dialogReturn" listener="#{processCardBean.onElementClose}" />
            </p:commandButton>

            <p:commandButton  value="State" title="#{bundle.AddState}"
                              disabled="#{processCardBean.isReadOnly()}"
                              actionListener="#{processCardBean.onAddStateElement('success')}" >
                <p:ajax event="dialogReturn" listener="#{processCardBean.onElementClose}" />
            </p:commandButton>

            <p:commandButton  value="Timer" title="#{bundle.AddTimer}"
                              disabled="#{processCardBean.isReadOnly()}"
                              actionListener="#{processCardBean.onAddTimerElement()}" >
                <p:ajax event="dialogReturn" listener="#{processCardBean.onElementClose}" />
            </p:commandButton>
            
             <p:commandButton value="Message" title="#{bundle.AddMessageElement}"
                              disabled="#{processCardBean.isReadOnly()}"
                              actionListener="#{processCardBean.onAddMessageElement()}" >
                <p:ajax event="dialogReturn" listener="#{processCardBean.onElementClose}" />
            </p:commandButton>

            <p:commandButton value="Start" title="#{bundle.AddStart}"
                             disabled="#{processCardBean.isReadOnly()}"
                             actionListener="#{processCardBean.onAddStartElement()}" >
                <p:ajax event="dialogReturn" listener="#{processCardBean.onElementClose}" />
            </p:commandButton>
            <p:commandButton value="Enter" title="#{bundle.AddEnter}"
                             disabled="#{processCardBean.isReadOnly()}"
                             actionListener="#{processCardBean.onAddEnterElement()}" >
                <p:ajax event="dialogReturn" listener="#{processCardBean.onElementClose}" />
            </p:commandButton>
            <p:commandButton value="Exit" title="#{bundle.AddExit}"
                             disabled="#{processCardBean.isReadOnly()}"
                             actionListener="#{processCardBean.onAddExitElement()}" >
                <p:ajax event="dialogReturn" listener="#{processCardBean.onElementClose}" />
            </p:commandButton>

            <span class="ui-separator">
                <span class="ui-icon ui-icon-grip-dotted-vertical" />
            </span>

            <p:commandButton title="#{bundle.LoadFromTemlate}" icon="ui-icon-folder-open"
                             disabled="#{processCardBean.isReadOnly()}"                                         
                             onclick="PF('LoadFromTemplDLG').show();"
                             update="LoadFromTemplFRM">                           
            </p:commandButton>
            <p:commandButton title="#{bundle.SaveAsTemlate}" icon="ui-icon-disk"
                             disabled="#{processCardBean.isReadOnly()}"
                             update="SaveAsTemplFRM"
                             onclick="PF('SaveAsTemplDLG').show();">
            </p:commandButton>

            <p:commandButton title="Clear" icon="ui-icon-closethick"
                             disabled="#{processCardBean.isReadOnly()}"
                             actionListener="#{processCardBean.onClearModel()}"
                             update="diagramm">
                <p:confirm header="#{msg.ProcessDiagramWillBeCleared}" message="#{bundle.AreYouSure}" icon="ui-icon-alert"/>
            </p:commandButton>
            <span class="ui-separator">
                <span class="ui-icon ui-icon-grip-dotted-vertical" />
            </span>                          
            <p:commandButton type="button" title="Print" icon="ui-icon-print"/>
        </f:facet>

        <f:facet name="right">                        
        </f:facet>
    </p:toolbar>  

    <p:diagram id="diagramm" value="#{processCardBean.model}" style="height:1600px" styleClass="ui-widget-content ui-grid-col-12" var="el" widgetVar="DiagrammWG" >
        <f:facet name="element" >
            <h:outputLabel value="#{processCardBean.getElementCaption(el)}" styleClass="diagramm-label" style="display:block;margin:0.5em;word-wrap:break-word;"/>
            <p:graphicImage value="#{processCardBean.getElementImage(el)}" styleClass="diagramm-image"/>
        </f:facet>
        <p:ajax event="connect" disabled="#{processCardBean.isReadOnly()}" listener="#{processCardBean.onConnect}" ignoreAutoUpdate="true"/>
        <p:ajax event="disconnect" disabled="#{processCardBean.isReadOnly()}" listener="#{processCardBean.onDisconnect}" ignoreAutoUpdate="true"/>
        <p:ajax event="connectionChange" disabled="#{processCardBean.isReadOnly()}" listener="#{processCardBean.onConnectionChange}" ignoreAutoUpdate="true"/>
    </p:diagram>

</ui:composition>