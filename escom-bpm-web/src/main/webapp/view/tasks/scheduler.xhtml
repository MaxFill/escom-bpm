<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:h="http://xmlns.jcp.org/jsf/html"
                 template="/view/templ/templ-dlg.xhtml">

    <ui:define name="title">
        #{bundle.Scheduler}
    </ui:define>

    <ui:param name="_bean" value="#{schedulerBean}"/>

    <ui:define name="menuActions" >
    </ui:define>   
    
    <ui:define name="customStyleCSS">
        <style>
            .finished {
                text-decoration: line-through !important; 
            }
            .running {
                font-weight: bold !important;
            }
            .draft {
                font-style: italic !important;
            }
        </style>
    </ui:define>
    
    <ui:define name="toolbarComponents" >
        <p:commandButton id="btnCreateTask" style="display: none;" actionListener="#{schedulerBean.onCreateTask(_bean)}">
            <p:ajax event="dialogReturn" listener="#{schedulerBean.onTaskDlgClose}"/>
        </p:commandButton>
        <p:commandButton id="btnOpenTask" style="display: none;" actionListener="#{schedulerBean.onOpenTask(_bean)}">
            <p:ajax event="dialogReturn" listener="#{schedulerBean.onTaskDlgClose}"/>
        </p:commandButton>
    </ui:define>

    <ui:define name="centerFormContent">
        <h:panelGrid columnClasses="ui-grid-col-12 col-padding" styleClass="ui-grid-col-12 without-spaces">
            <p:schedule id="schedule" value="#{schedulerBean.eventModel}" widgetVar="schedule" timeZone="#{TimeZone.getDefault()}" ignoreTimezone="false"
                        timeFormat="HH:mm" axisFormat="HH" tooltip="true" resizable="true" clientTimeZone="#{TimeZone.getDefault()}" 
                        locale="#{sessionBean.locale}" >
                <p:ajax event="dateSelect" listener="#{schedulerBean.onDateSelect}"  />
                <p:ajax event="eventSelect" listener="#{schedulerBean.onEventSelect}"  />
                <p:ajax event="eventMove" listener="#{schedulerBean.onEventMove}"  />
                <p:ajax event="eventResize" listener="#{schedulerBean.onEventResize}" />
            </p:schedule>  
        </h:panelGrid>
    </ui:define>
</ui:composition>