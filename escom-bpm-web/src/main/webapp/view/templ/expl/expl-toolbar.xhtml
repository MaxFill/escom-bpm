<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"    
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    
    <p:toolbar id="explToolBar">
        <f:facet name="left">
            <p:commandButton icon="ui-icon-circle-arrow-w" rendered="#{!_explorerBean.selectorViewMode}"
                             title="#{bundle.GotoIndex}" ajax="false"
                             action="#{sessionBean.goToIndex() }"
                             onclick="return isClose = 1;"/>

            <span class="ui-separator">
                <span class="ui-icon ui-icon-grip-dotted-vertical" />
            </span>

            <p:commandButton id="btnRefreshRight" icon="ui-icon-refresh" 
                             title="#{bundle.Refresh}"                                  
                             actionListener="#{_explorerBean.reloadDetailsItems()}"
                             update="#{_frmExpl} centerHeaderLabel #{_updates}"
                             oncomplete="initDND()"/> 
            
            <span class="ui-separator">
                <span class="ui-icon ui-icon-grip-dotted-vertical" />
            </span>

            <p:commandButton icon="ui-icon-arrowthick-1-n" title="#{bundle.Up}"
                             actionListener="#{_explorerBean.onGotoUpLevelContent()}"
                             disabled="#{_explorerBean.treeSelectedNode == null or _explorerBean.isSelectRootItem()}"
                             rendered="#{_treeBean != null}"
                             update="centerHeaderLabel #{_frmExpl} #{_frmTree} "
                             oncomplete="initDND()"/>
            <span class="ui-separator">
                <span class="ui-icon ui-icon-grip-dotted-vertical" />
            </span>

            <p:commandButton icon="ui-icon-copy" title="#{bundle.Copy}"
                            disabled="#{_explorerBean.checkedItems.isEmpty()}"
                            update="#{_frmExpl}:explToolBar"
                            onstart="PF('statusDialog').show()"
                            oncomplete="PF('statusDialog').hide(); initDND();"
                            actionListener="#{_explorerBean.onCopySelectedItem()}"/>
            <p:commandButton icon="ui-icon-clipboard" title="#{bundle.Paste}" 
                            disabled="#{_explorerBean.canPasteItem}"
                            onstart="PF('statusDialog').show()"
                            oncomplete="PF('statusDialog').hide();"
                            actionListener="#{_explorerBean.onPasteItemToTable()}"
                            update="#{_frmExpl} #{_frmTree}"/>

            <span class="ui-separator">
                <span class="ui-icon ui-icon-grip-dotted-vertical" />
            </span>
                
            <p:commandButton value="#{_CreateItemLabel}"
                             title="#{_explorerBean.canCreateItem ? bundle.ForCreateObjectNeedSelectGroup : _CreateItemLabel}" 
                             icon="ui-icon-document" id="createItemBtn"
                             disabled="#{_explorerBean.canCreateItem}"
                             rendered="#{!_explorerBean.isTrashSelected()}"
                             style="#{_explorerBean.selectorViewMode ? 'display: none;' : ''}"
                             actionListener="#{_explorerBean.onCreateDetailItem()}">
                <p:ajax event="dialogReturn"
                        update="#{_frmExpl}"
                        listener="#{_explorerBean.onUpdateAfterCloseForm}" oncomplete="initDND()"/>
            </p:commandButton>

            <p:commandButton value="#{_CreateGroupLabel}" icon="ui-icon-folder-open"
                             disabled="#{_treeBean != null and _explorerBean.treeSelectedNode == null}"
                             rendered="#{_treeBean != null and !_explorerBean.isTrashSelected()}"
                             actionListener="#{_explorerBean.onCreateTreeItem()}">
                <p:ajax event="dialogReturn" 
                        update="#{_frmTree} #{_frmExpl}" 
                        listener="#{_explorerBean.onUpdateAfterCloseForm}" oncomplete="initDND()"/>
            </p:commandButton>
            <p:commandButton value="#{_CreateItemLabel}" icon="ui-icon-plus" 
                             disabled="#{_treeBean != null and _explorerBean.treeSelectedNode == null}"
                             rendered="#{!_explorerBean.isTrashSelected() and _explorerBean.selectorViewMode}"
                             actionListener="#{_explorerBean.onCreateDetailItem()}">
                <p:ajax event="dialogReturn"
                        update="#{_frmExpl}"
                        listener="#{_explorerBean.onUpdateAfterCloseForm}" oncomplete="initDND()"/>
            </p:commandButton>
            <ui:insert name="addMenuCreates" />
        </f:facet> 
    
        <f:facet name="right">
            <p:commandButton value="#{bundle.SelectChecked}" icon="ui-icon-check" 
                            title="#{bundle.SelectChecked}"
                            disabled="#{_explorerBean.checkedItems.isEmpty()}"
                            rendered="#{_explorerBean.multySelectMode}"
                            action="#{_explorerBean.onMultySelect()}"
                            onclick="return isClose = 1;">
            </p:commandButton>
                
            <p:splitButton value="#{bundle.Actions}" icon="ui-icon-gear"
                           rendered="#{!_explorerBean.isTrashSelected()}">
                <p:menuitem icon="ui-icon-trash" value="#{bundle.MoveCheckedToTrash}" title="#{bundle.MoveCheckedToTrash}"
                            disabled="#{_explorerBean.checkedItems.isEmpty()}"
                            update="#{_frmTree} #{_frmExpl}"
                            actionListener="#{_explorerBean.onMoveCheckedContentToTrash()}"
                            oncomplete="initDND()">
                    <p:confirm header="#{bundle.ConfirmDelete}" message="#{bundle.AreYouSure}" icon="ui-icon-alert" />
                </p:menuitem>
                <p:separator />
                <ui:insert name="addMenuActions" />
                <p:menuitem icon="ui-icon-star" value="#{bundle.AddCheckedToFavorites}" title="#{bundle.AddToFavorites}"
                            disabled="#{_explorerBean.checkedItems.isEmpty()}"
                            rendered="#{!_explorerBean.isFavoriteSelected()}"
                            actionListener="#{_explorerBean.onAddCheckedContentInFavorites()}"/>
                <p:menuitem icon="ui-icon-scissors" value="#{bundle.DeleteCheckedFromFavorites}" title="#{bundle.DeleteFromFavorites}"
                            disabled="#{_explorerBean.checkedItems.isEmpty()}"
                            rendered="#{_explorerBean.isFavoriteSelected()}"
                            update="#{_frmExpl}"
                            oncomplete="initDND()"
                            actionListener="#{_explorerBean.onDelCheckedFromFavorites()}"/>
                <p:separator />
                <p:menuitem value="#{bundle.ManualBook}" icon="ui-icon-help"
                                actionListener="#{sessionBean.onViewHelp()}"/>
            </p:splitButton>

            <!-- Кнопка для Корзины -->
            <p:splitButton value="#{bundle.Actions}" icon="ui-icon-gear"                   
                           rendered="#{sessionBean.userAdmin and _explorerBean.isTrashSelected()}">
                <p:menuitem value="#{bundle.ClearTrash}" icon="ui-icon-close" title="#{bundle.FullClearTrash}"
                            disabled="#{_explorerBean.detailItems.isEmpty()}"
                            update="#{_frmExpl}"
                            actionListener="#{_explorerBean.onClearTrash()}"
                            oncomplete="initDND()">
                    <p:confirm header="#{bundle.ConfirmDelete}" message="#{bundle.OperationIsNotReversible}" icon="ui-icon-alert" />
                </p:menuitem>
                <p:menuitem value="#{bundle.ClearCheckedTrash}" icon="ui-icon-close"                                                 
                            update="#{_frmExpl}"
                            disabled="#{_explorerBean.checkedItems.isEmpty()}"
                            actionListener="#{_explorerBean.onClearCheckedContentTrash()}"
                            oncomplete="initDND()">
                    <p:confirm header="#{bundle.ConfirmDelete}" message="#{bundle.OperationIsNotReversible}" icon="ui-icon-alert" />
                </p:menuitem> 
                <p:separator/>
                <p:menuitem value="#{bundle.RestoreChecked}" icon="ui-icon-arrowreturnthick-1-w"                                                 
                            update="#{_frmExpl}"
                            disabled="#{_explorerBean.checkedItems.isEmpty()}"
                            actionListener="#{_explorerBean .onRestoreCheckedContentTrash()}"
                            oncomplete="initDND()">
                </p:menuitem>
            </p:splitButton>            
            
            <ui:insert name="addToolButtons" />
            
        </f:facet>

    </p:toolbar>  
</ui:composition>

