<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/view/templ/templ-dlg.xhtml">

    <ui:define name="formHeader">
        #{_bean.getFormHeader()}
    </ui:define>
    
    <ui:define name="menuActions" >
        <ui:insert name="specActionMenu" />
        <p:separator />        
        <p:menuitem icon="ui-icon-star" value="#{bundle.AddToFavorites}"
                    disabled="#{_bean.editedItem.id == null}"
                    actionListener="#{_bean.addInFavorites(_bean.editedItem)}"/>
    </ui:define>

    <ui:define name="specToolButtons">
        <ui:insert name="CardToolButtons"/>
        <span class="ui-separator">
            <span class="ui-icon ui-icon-grip-dotted-vertical" />
        </span>
        <p:commandButton id="btnSaveClose" title="#{bundle.SaveClose}"
                    disabled="#{_bean.isReadOnly()}"
                    icon="ui-icon-disk"
                    update="mainFRM"
                    actionListener="#{_bean.prepSaveItemAndClose()}"
                    onclick="if (itemChange == 1) {
                        onChangeItem();
                    } 
                    sendFormSize();">
            <f:param name="isRequired" value="true"/>
        </p:commandButton>
        <span class="ui-separator">
            <span class="ui-icon ui-icon-grip-dotted-vertical" />
        </span>
    </ui:define>
    
    <ui:define name="toolbarComponents" >
        <p:menuButton value="#{bundle.Print}" icon="ui-icon-print" >
            <p:menuitem icon="ui-icon-print" value="#{bundle.PrintCardItem}"
                        disabled="#{_bean.editedItem.id == null}"
                        actionListener="#{_bean.onPreViewItemCard()}"/>
            <p:menuitem icon="ui-icon-print" value="#{bundle.PrintBarCode}"
                        disabled="#{_bean.editedItem.id == null}"
                        actionListener="#{_bean.onPreViewBarcode()}"/>
        </p:menuButton>
        <ui:insert name="specSubMenu" />
    </ui:define>
            
    <ui:define name="centerFormContent">        
        <p:focus context="mainFRM:mainTabView" for="mainFRM:mainTabView:nameItem"/>
               
        <p:tabView orientation="left" id="mainTabView" styleClass="ui-grid-col-12 col-padding" activeIndex="#{_bean.tabActiveIndex}" dynamic="true">
            <p:ajax event="tabChange" listener="#{_bean.onTabChange}" />
            <ui:insert name="page_body"/>
            <ui:include src="/view/common/dict-rights.xhtml"/>
            <ui:insert name="childs_rights"/> 
            <ui:include src="/view/common/dict-info.xhtml"/>
            <ui:include src="/view/common/dict-log.xhtml"/> 
        </p:tabView>

        <p:importConstants type="com.maxfill.dictionary.DictRights"       var="DictRights" />
        <p:importConstants type="com.maxfill.dictionary.DictEditMode"     var="DictEditMode" />
        <p:importConstants type="com.maxfill.dictionary.DictModules"      var="DictModules" />
        <p:importConstants type="com.maxfill.dictionary.DictDetailSource" var="DictSource" />
        <ui:include src="/view/sys/noSaveDlg.xhtml" />
        
    </ui:define>    
        
</ui:composition>
