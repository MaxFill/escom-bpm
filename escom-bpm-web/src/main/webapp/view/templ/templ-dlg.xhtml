<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="/view/templ/templ-frm.xhtml">

    <ui:define name="title">
        #{_bean.getFormHeader()}
    </ui:define>

    <ui:define name="centerContent"> 
        #{_bean.onAfterFormLoad()}

        <script>
            var isFullPage = #{_bean.isFullPageMode()};
            var formName = '#{_bean.getFormName()}';
            window.onbeforeunload = function () {
                if (!isFullPage) {
                    sendFormSize(formName);
                }
                return null;
            };
            
        </script> 

        <h:form id="mainFRM" style="font-size: 90%; height: 100%;" styleClass="ui-grid-col-12" >            
            <p:panelGrid layout="grid" columns="1" columnClasses="ui-grid-col-12 col-padding" styleClass="ui-grid-col-12 without-spaces">                        
                <p:toolbar id="explToolBar">
                    <f:facet name="left">
                        <ui:insert name="toolbarComponents"/>
                    </f:facet>
                    <f:facet name="right">
                        <ui:insert name="specToolButtons"/>
                        <p:menuButton value="#{bundle.Actions}" icon="ui-icon-gear">
                            <ui:insert name="menuActions" />  
                            <p:separator />
                            <p:menuitem value="#{bundle.ManualBook}" icon="ui-icon-help" rendered="#{_isShowHelp}" 
                                        onstart="PF('statusDialog').show()"
                                        oncomplete="PF('statusDialog').hide();"
                                        actionListener="#{sessionBean.onViewHelp()}"/>
                        </p:menuButton>
                    </f:facet>
                </p:toolbar>  

                <p:messages id="messages" showDetail="false" closable="true" styleClass="ui-grid-col-12 without-spaces">
                    <p:autoUpdate />
                </p:messages>

                <ui:insert name="centerFormContent"/>

            </p:panelGrid>

            <ui:insert name="form_scripts"/>

            <ui:include src="/view/common/confirm-dlg.xhtml"/>
            <p:remoteCommand name="formSize" immediate="true" actionListener="#{sessionBean.onFormSize()}" />            
        </h:form>

    </ui:define>

</ui:composition>