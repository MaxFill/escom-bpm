<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:outputScript library="js" name="clear-search.js" target="head"/>

    <script type="text/javascript" >
        function keyPress() {
            if (event.keyCode === 13) {
                document.getElementById('searcheBtn').click();
                return;
            }
        }
    </script> 

    <p:defaultCommand target="eastFRM:searcheBtn" />
        
    <p:panelGrid columns="2" layout="grid" columnClasses="ui-grid-col-4 col-padding, ui-grid-col-12 col-padding" styleClass="ui-grid-col-12 without-spaces" >
        <p:panelGrid columns="2" id="abcGrid" layout="grid" columnClasses="ui-grid-col-12 col-padding, ui-grid-col-12 col-padding">
            <p:commandButton value="*" title="#{bundle.StartAnyChars}" styleClass="btABC"
                             actionListener="#{_explorerBean.onAbcSearche}"
                             update="#{_tblUpdate}"
                             onstart="PF('statusDialog').show()"
                             oncomplete="PF('statusDialog').hide(); initDND();">
                <f:attribute name="action" value="#{'*'}" />
            </p:commandButton>
            <p:commandButton value="0-9" title="#{bundle.StartDigital}" style="width: 30px; font-size: 90%;"
                             actionListener="#{_explorerBean.onAbcSearche}"
                             update="#{_tblUpdate}"
                             onstart="PF('statusDialog').show()"
                             oncomplete="PF('statusDialog').hide(); initDND();">
                <f:attribute name="action" value="#{'[0-9]'}" />
            </p:commandButton>

            <ui:repeat var="abcEngl" value="#{_explorerBean.model.abcEnglSearche}">
                <p:commandButton value="#{abcEngl}" styleClass="btABC"                       
                                actionListener="#{_explorerBean.onAbcSearche}"
                                update="#{_tblUpdate}"
                                onstart="PF('statusDialog').show()"
                                oncomplete="PF('statusDialog').hide(); initDND();">
                    <f:attribute name="action" value="#{abcEngl}" />
                </p:commandButton>
            </ui:repeat>

            <ui:repeat var="abcLocal" value="#{_explorerBean.model.abcLocalSearche}">
                <p:commandButton value="#{abcLocal}" styleClass="btABC"
                                 actionListener="#{_explorerBean.onAbcSearche}"
                                 update="#{_tblUpdate}"
                                 onstart="PF('statusDialog').show()"
                                 oncomplete="PF('statusDialog').hide(); initDND();">
                    <f:attribute name="action" value="#{abcLocal}" />
                </p:commandButton>
            </ui:repeat>
        </p:panelGrid>

        <p:panelGrid columns="1"  columnClasses="ui-grid-col-12 col-padding" styleClass="ui-grid-col-12" style="padding: 0px;">        
            <p:selectOneRadio value="#{_explorerBean.model.searcheInGroups}" layout="pageDirection" rendered="#{_explorerBean.treeBean != null}">
                <f:selectItem itemLabel="#{bundle.SearcheWitchOutGroup}" itemValue="#{false}" />
                <f:selectItem itemLabel="#{bundle.SearcheInCurrentGroup}" itemValue="#{true}" />
            </p:selectOneRadio>

            <p:selectBooleanCheckbox itemLabel="#{bundle.SearcheOnlyActualItems}" 
                                     title="#{bundle.SearcheOnlyActualItemsComments}" 
                                     value="#{_explorerBean.model.onlyActualItem}">
            </p:selectBooleanCheckbox> 
            
            <p:outputLabel value="#{bundle.KeyWord}"/>
            <h:panelGroup styleClass="ui-grid-col-12">
                <div class="ui-inputgroup">
                <p:inputText id="nameSearche" widgetVar="searchName" title="#{bundle.KeyWordSearche}"
                             value="#{_explorerBean.model.nameSearche}"
                             styleClass="ui-grid-col-10"
                             placeholder="#{bundle.InputCreteriaForSearche}"
                             onkeypress="keyPress();">
                </p:inputText>
                <p:commandButton styleClass="btnClear" icon="ui-icon-close" onclick="PF('searchName').jq.val('');"/>
                </div>
            </h:panelGroup>

            <ui:insert name="searche"/>

            <p:outputLabel value="#{bundle.Owner}"/>
            <h:panelGroup styleClass="ui-grid-col-12">
                <div class="ui-inputgroup">
                    <p:selectOneMenu value="#{_explorerBean.model.authorSearche}" filter="true" converter="usersConvertor"
                                     widgetVar="authorSearche"
                                     styleClass="ui-grid-col-10">
                        <f:selectItems value="#{userBean.findAll()}" var="user" itemValue="#{user}" itemLabel="#{user.shortFIO}" />
                        <f:selectItem value="#{null}" itemLabel="#{bundle.NotSpecified}" itemValue="#{null}"/>
                    </p:selectOneMenu>
                    <p:commandButton styleClass="btnClear" icon="ui-icon-close" onclick="PF('authorSearche').selectValue();"/>
                </div>
            </h:panelGroup>

            <p:outputLabel value="#{bundle.States}"/>
            <p:selectManyMenu id="stateChecks" value="#{_explorerBean.model.stateSearche}" showCheckbox="true"
                              widgetVar="stateSearche" var="s"
                              label="#{bundle.Select}" converter="stateConvertor"
                              styleClass="ui-grid-col-12">
                <f:selectItems value="#{_searcheBean.metadatesObj.statesList}" var="state" itemLabel="#{stateBean.getBundleName(state)}" itemValue="#{state}"/>
                <p:column>
                    <h:outputText value="#{stateBean.getBundleName(s)}" />
                </p:column>
            </p:selectManyMenu>

            <p:selectBooleanCheckbox itemLabel="#{bundle.DateCreate}" id="cbDateCreate" 
                                     widgetVar="cbDateCreate"
                                     title="#{bundle.SearcheDateCreate}"  
                                     value="#{_explorerBean.model.dateCreateSearche}">
                <p:ajax event="change" update="pnDateCreateSearche"/>
            </p:selectBooleanCheckbox>   

            <h:panelGroup id="pnDateCreateSearche"> 
                <p:panelGrid columns="2"  columnClasses="col10r ui-grid-col-1" 
                             rendered="#{_explorerBean.model.dateCreateSearche}">
                    #{bundle.With}
                    <p:calendar value="#{_explorerBean.model.dateCreateStart}" id="dateCreateStart" 
                                widgetVar="dateCreateStartSearche"
                                navigator="true" yearRange="c-120:c+20"
                                locale="#{sessionBean.locale}"
                                required="#{_explorerBean.model.dateCreateSearche and param['isRequired'] == 'true'}"
                                requiredMessage="#{bundle.Field} [#{bundle.DateCreate}: #{bundle.With}] #{bundle.MustBeFilled}"
                                disabled="#{!_explorerBean.model.dateCreateSearche}">
                    </p:calendar>
                </p:panelGrid>
                <p:panelGrid columns="2"  columnClasses="col10r ui-grid-col-1" 
                             rendered="#{_explorerBean.model.dateCreateSearche}">
                    #{bundle.At}
                    <p:calendar value="#{_explorerBean.model.dateCreateEnd}" id="dateCreateEnd" 
                                widgetVar="dateCreateEndSearche"
                                navigator="true" yearRange="c-120:c+20"
                                locale="#{sessionBean.locale}"
                                required="#{_explorerBean.model.dateCreateSearche and param['isRequired'] == 'true'}"
                                requiredMessage="#{bundle.Field} [#{bundle.DateCreate}: #{bundle.At}] #{bundle.MustBeFilled}"
                                disabled="#{!_explorerBean.model.dateCreateSearche}">
                    </p:calendar>
                </p:panelGrid>
            </h:panelGroup>
            
            <p:selectBooleanCheckbox itemLabel="#{bundle.DateChange}" id="cbDateChange" 
                                     widgetVar="cbDateChange"
                                     title="#{bundle.SearcheDateChange}" 
                                     value="#{_explorerBean.model.dateChangeSearche}">
                <p:ajax event="change" update="pnDateChangeSearche"/>
            </p:selectBooleanCheckbox> 

            <h:panelGroup id="pnDateChangeSearche">          
                <p:panelGrid columns="2"  columnClasses="col10r ui-grid-col-1" rendered="#{_explorerBean.model.dateChangeSearche}">
                    #{bundle.With}
                    <p:calendar value="#{_explorerBean.model.dateChangeStart}" id="dateChangeStart"
                                widgetVar="dateChangeStartSearche"
                                navigator="true" yearRange="c-120:c+20"
                                locale="#{sessionBean.locale}"
                                required="#{_explorerBean.model.dateChangeSearche and param['isRequired'] == 'true'}"
                                requiredMessage="#{bundle.Field} [#{bundle.DateChange}: #{bundle.With}] #{bundle.MustBeFilled}"
                                disabled="#{!_explorerBean.model.dateChangeSearche}">
                    </p:calendar>
                </p:panelGrid>
                <p:panelGrid columns="2"  columnClasses="col10r ui-grid-col-1" rendered="#{_explorerBean.model.dateChangeSearche}">
                    #{bundle.At}
                    <p:calendar value="#{_explorerBean.model.dateChangeEnd}" id="dateChangeEnd"
                                widgetVar="dateChangeEndSearche"
                                navigator="true" yearRange="c-120:c+20"
                                locale="#{sessionBean.locale}"
                                required="#{_explorerBean.model.dateChangeSearche and param['isRequired'] == 'true'}"
                                requiredMessage="#{bundle.Field} [#{bundle.DateChange}: #{bundle.At}] #{bundle.MustBeFilled}"
                                disabled="#{!_explorerBean.model.dateChangeSearche}">
                    </p:calendar>
                </p:panelGrid>
            </h:panelGroup>

            <p:separator />

            <h:panelGroup styleClass="ui-grid-col-12">
                <p:commandButton id="searcheBtn" title="#{bundle.MakeSearche}"
                                 icon="ui-icon-search" value="#{bundle.Find}"
                                 action="#{_explorerBean.onSearcheItem}"
                                 update="#{_tblUpdate}"
                                 onstart="PF('statusDialog').show()"
                                 oncomplete="PF('statusDialog').hide(); initDND();">
                    <f:param name="isRequired" value="true"/>
                </p:commandButton>
                <p:commandButton value="#{bundle.Reset}" icon="ui-icon-closethick" style="float: right;"
                                 title="#{bundle.ResetSearcheCriteria}">
                    <p:ajax update="eastFRM" oncomplete="clearSearche();"/>
                </p:commandButton>
            </h:panelGroup>

        </p:panelGrid>
    </p:panelGrid>

</ui:composition>