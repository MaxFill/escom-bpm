<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:f="http://xmlns.jcp.org/jsf/core"
                 xmlns:h="http://xmlns.jcp.org/jsf/html"
                 template="/view/templ/templ-dlg.xhtml">

    <ui:define name="title">
        #{bundle.CountersNumbers}
    </ui:define>

    <ui:param name="_bean" value="#{countersExplBean}"/>

    <ui:define name="centerFormContent">      

        <p:dataTable id="itemsTbl" value="#{countersExplBean.counters}" 
                     emptyMessage="#{bundle.EmptyTable}"
                     editable="true" editMode="cell"
                     paginator="true" paginatorPosition="bottom"                       
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                     rowsPerPageTemplate="10,25,50" rows="10"
                     tableStyle="table-layout: auto;" styleClass="ui-grid-col-12 col-padding"
                     selection="#{countersExplBean.selected}" selectionMode="single"
                     var="item" rowKey="#{item.id}">

            <p:ajax event="cellEdit" listener="#{countersExplBean.onNumberEdit}" />

            <p:column width="16">
                <h:graphicImage value="/resources/icon/counter.png"/>   
            </p:column>

            <p:column headerText="#{bundle.TypeDoc}" sortBy="#{item.docType.name}">
                <h:outputLabel value="#{item.docType.name}"/>
            </p:column>

            <p:column headerText="#{bundle.Company}" sortBy="#{item.company.name}">
                <h:outputLabel value="#{item.company.name}"/>
            </p:column>   

            <p:column headerText="#{bundle.Year}" sortBy="#{item.year}">
                <h:outputLabel value="#{item.year}" />                                    
            </p:column> 

            <p:column headerText="#{bundle.Number}">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputLabel value="#{item.number}" />
                    </f:facet>
                    <f:facet name="input">
                        <p:inputNumber value="#{item.number}" decimalPlaces="0" />
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column>
                <p:commandButton icon="ui-icon-trash" title="#{bundle.Delete}" 
                                 update="itemsTbl"
                                 actionListener="#{countersExplBean.onDeleteItem(item)}">
                    <p:confirm header="#{bundle.Delete}" message="#{bundle.ConfirmDelete}" icon="ui-icon-alert" />
                </p:commandButton>
            </p:column>
        </p:dataTable> 
    </ui:define>
</ui:composition>