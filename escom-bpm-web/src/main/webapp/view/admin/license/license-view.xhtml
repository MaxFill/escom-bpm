<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:pe="http://primefaces.org/ui/extensions"
                 xmlns:h="http://xmlns.jcp.org/jsf/html"
                 template="/view/templ/templ-dlg.xhtml"
                 xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="preRendered">
        <f:metadata>
            <f:viewAction action="#{licenseBean.onBeforeOpenCard()}"/>
            <f:viewAction action="#{licenseBean.onAfterFormLoad()}"/>
        </f:metadata>
    </ui:define>
    
    <ui:param name="_bean" value="#{licenseBean}"/>
    <ui:param name="_canNotClose" value="#{!sessionBean.userSettings.agreeLicense}"/>

    <ui:define name="title">
        #{bundle.LicenseAgreement}
    </ui:define>

    <ui:define name="menuActions" >
        <p:menuitem icon="ui-icon-circle-check"
                    rendered="#{!sessionBean.userSettings.agreeLicense}"
                    value="#{bundle.Accept}"
                    actionListener="#{licenseBean.onAcceptAndClose()}">
        </p:menuitem>
        <p:menuitem value="#{bundle.Refuse}" icon="ui-icon-close" title="#{bundle.ExitProgramm}"
                    rendered="#{!sessionBean.userSettings.agreeLicense}"
                    action="#{licenseBean.onExitProgram()}">
        </p:menuitem>
    </ui:define>

    <ui:define name="toolbarComponents" >
    </ui:define>

    <ui:define name="centerFormContent">
        <pe:documentViewer value="#{licenseBean.content}" height="750" style="width: 100%;"/>

        <h:panelGroup id="groupConfirm">
            <p:selectBooleanCheckbox value="#{sessionBean.userSettings.agreeLicense}"
                                     disabled="#{sessionBean.userSettings.agreeLicense}"
                                     itemLabel="#{bundle.AgreeLicenseConfirm}">
            </p:selectBooleanCheckbox>
            <p:spacer width="5" />
            <p:commandButton id="btnConfirm" icon="ui-icon-circle-check"
                             rendered="#{!sessionBean.userSettings.agreeLicense}"
                             value="#{bundle.Accept}"
                             actionListener="#{licenseBean.onAcceptAndClose()}">
            </p:commandButton>
            <p:commandButton id="btnExit"
                             value="#{bundle.Refuse}" icon="ui-icon-close" title="#{bundle.ExitProgramm}"
                             rendered="#{!sessionBean.userSettings.agreeLicense}"
                             action="#{licenseBean.onExitProgram()}">
            </p:commandButton>
        </h:panelGroup>
    </ui:define>

</ui:composition>
